<!doctype html>
<html>
<head>
    <script>
        function open_file(event)
        {
            const uint8Arr = new Uint8Array(event.target.result);
            const num_bytes = uint8Arr.length * uint8Arr.BYTES_PER_ELEMENT;
            const data_ptr = Module._malloc(num_bytes);
            const data_on_heap = new Uint8Array(Module.HEAPU8.buffer, data_ptr, num_bytes);
            data_on_heap.set(uint8Arr);
            const res = Module.ccall("load_file", "number", ["number", "number"], [data_on_heap.byteOffset, uint8Arr.length]);
        }
    </script>
</head>
<body>

    <div>
        <label for="selector">Browse for resourcepack: </label>
        <input type="file" onchange="open_file(event)" accept=".zip" id="selector">
    </div>
    <div>
        <input type="button" value="Start Conversion" onclick="Module.ccall('run')">
    </div>
    <div>
        <textarea name="output" rows="10" cols="40" readonly=""></textarea>
    </div>
    {{{ SCRIPT }}}
</body>
</html>